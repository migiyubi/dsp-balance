!function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=5)}([function(e){e.exports=JSON.parse('{"width":16,"height":16,"offsets":{"iron-ore":{"x":0,"y":0},"copper-ore":{"x":2,"y":0},"coal":{"x":2,"y":1},"stone-ore":{"x":0,"y":1},"silicon-ore":{"x":4,"y":0},"titanium-ore":{"x":6,"y":0},"fire-ice":{"x":0,"y":7},"kimberlite-ore":{"x":1,"y":7},"fractal-silicon":{"x":2,"y":7},"optical-grating-crystal":{"x":3,"y":7},"spiniform-stalagmite-crystal":{"x":4,"y":7},"unipolar-magnet":{"x":5,"y":7},"iron-ingot":{"x":1,"y":0},"copper-ingot":{"x":3,"y":0},"high-purity-silicon":{"x":5,"y":0},"titanium-ingot":{"x":7,"y":0},"stone-brick":{"x":1,"y":1},"energetic-graphite":{"x":3,"y":1},"plasma-refining":{"x":4,"y":1},"plastic":{"x":5,"y":1},"graphene":{"x":6,"y":1},"magnet":{"x":7,"y":1},"magnetic-coil":{"x":0,"y":2},"crystal-silicon":{"x":1,"y":2},"titanium-alloy":{"x":2,"y":2},"glass":{"x":3,"y":2},"diamond":{"x":4,"y":2},"organic-crystal":{"x":5,"y":2},"steel":{"x":6,"y":2},"electric-motor":{"x":7,"y":2},"titanium-glass":{"x":0,"y":3},"prism":{"x":1,"y":3},"photon-combiner":{"x":5,"y":8},"super-magnetic-ring":{"x":1,"y":9},"deuterium-fractionation":{"x":2,"y":3},"titanium-crystal":{"x":3,"y":3},"strange-matter":{"x":4,"y":3},"gear":{"x":5,"y":3},"electromagnetic-turbine":{"x":6,"y":3},"circuit-board":{"x":7,"y":3},"graviton-lens":{"x":0,"y":4},"plane-filter":{"x":2,"y":4},"carbon-nanotube":{"x":3,"y":4},"particle-broadband":{"x":4,"y":4},"processor":{"x":5,"y":4},"casimir-crystal":{"x":6,"y":4},"particle-container":{"x":7,"y":4},"microcrystalline-component":{"x":0,"y":5},"quantum-chip":{"x":1,"y":5},"mass-energy-storage":{"x":2,"y":5},"sulfuric-acid":{"x":1,"y":4},"crude-oil":{"x":3,"y":5},"refined-oil":{"x":4,"y":5},"water":{"x":5,"y":5},"hydrogen":{"x":6,"y":5},"deuterium":{"x":7,"y":5},"antimatter":{"x":0,"y":6},"critical-photon":{"x":7,"y":6},"electromagnetic-matrix":{"x":1,"y":6},"energy-matrix":{"x":2,"y":6},"structure-matrix":{"x":3,"y":6},"information-matrix":{"x":4,"y":6},"gravity-matrix":{"x":5,"y":6},"universe-matrix":{"x":6,"y":6},"deuteron-fuel-rod":{"x":2,"y":9},"solar-sail":{"x":6,"y":8},"frame-material":{"x":7,"y":8},"dyson-sphere-component":{"x":0,"y":9},"small-carrier-rocket":{"x":3,"y":9}}}')},function(e){e.exports=JSON.parse('{"recipe":{"iron-ingot":{"inputs":{"iron-ore":1},"outputs":{"iron-ingot":1},"facility":"smelting-facility","hand_make":"replicator","time_sec":1},"copper-ingot":{"inputs":{"copper-ore":1},"outputs":{"copper-ingot":1},"facility":"smelting-facility","hand_make":"replicator","time_sec":1},"high-purity-silicon":{"inputs":{"silicon-ore":2},"outputs":{"high-purity-silicon":1},"facility":"smelting-facility","hand_make":"replicator","time_sec":2},"titanium-ingot":{"inputs":{"titanium-ore":2},"outputs":{"titanium-ingot":1},"facility":"smelting-facility","hand_make":"replicator","time_sec":2},"stone-brick":{"inputs":{"stone-ore":1},"outputs":{"stone-brick":1},"facility":"smelting-facility","hand_make":"replicator","time_sec":1},"energetic-graphite":{"inputs":{"coal":2},"outputs":{"energetic-graphite":1},"facility":"smelting-facility","hand_make":"replicator","time_sec":2},"plasma-refining":{"inputs":{"crude-oil":2},"outputs":{"refined-oil":2,"hydrogen":1},"facility":"refining-facility","hand_make":null,"time_sec":4},"plastic":{"inputs":{"energetic-graphite":1,"refined-oil":2},"outputs":{"plastic":1},"facility":"chemical-facility","hand_make":null,"time_sec":3},"graphene":{"inputs":{"energetic-graphite":3,"sulfuric-acid":1},"outputs":{"graphene":2},"facility":"chemical-facility","hand_make":null,"time_sec":3},"graphene-adv":{"inputs":{"fire-ice":2},"outputs":{"graphene":2,"hydrogen":1},"facility":"chemical-facility","hand_make":null,"time_sec":2},"magnet":{"inputs":{"iron-ore":1},"outputs":{"magnet":1},"facility":"smelting-facility","hand_make":"replicator","time_sec":1.5},"magnetic-coil":{"inputs":{"copper-ingot":1,"magnet":2},"outputs":{"magnetic-coil":2},"facility":"assembler","hand_make":"replicator","time_sec":1},"crystal-silicon":{"inputs":{"high-purity-silicon":1},"outputs":{"crystal-silicon":1},"facility":"smelting-facility","hand_make":null,"time_sec":2},"crystal-silicon-adv":{"inputs":{"fractal-silicon":1},"outputs":{"crystal-silicon":1},"facility":"assembler","hand_make":null,"time_sec":4},"titanium-alloy":{"inputs":{"titanium-ingot":4,"steel":4,"sulfuric-acid":8},"outputs":{"titanium-alloy":4},"facility":"smelting-facility","hand_make":null,"time_sec":12},"glass":{"inputs":{"stone-ore":2},"outputs":{"glass":1},"facility":"smelting-facility","hand_make":"replicator","time_sec":2},"diamond":{"inputs":{"energetic-graphite":1},"outputs":{"diamond":1},"facility":"smelting-facility","hand_make":null,"time_sec":2},"diamond-adv":{"inputs":{"kimberlite-ore":1},"outputs":{"diamond":1},"facility":"smelting-facility","hand_make":null,"time_sec":2},"organic-crystal":{"inputs":{"plastic":2,"refined-oil":1,"water":1},"outputs":{"organic-crystal":1},"facility":"chemical-facility","hand_make":null,"time_sec":6},"steel":{"inputs":{"iron-ingot":3},"outputs":{"steel":1},"facility":"smelting-facility","hand_make":null,"time_sec":3},"electric-motor":{"inputs":{"iron-ingot":2,"gear":1,"magnetic-coil":1},"outputs":{"electric-motor":1},"facility":"assembler","hand_make":"replicator","time_sec":2},"titanium-glass":{"inputs":{"glass":2,"titanium-ingot":2,"water":2},"outputs":{"titanium-glass":2},"facility":"assembler","hand_make":"replicator","time_sec":5},"prism":{"inputs":{"glass":3},"outputs":{"prism":2},"facility":"assembler","hand_make":"replicator","time_sec":2},"deuterium-fractionation":{"inputs":{"hydrogen":1},"outputs":{"hydrogen":0.99,"deuterium":0.01},"facility":"fractionation-facility","hand_make":null,"time_sec":1},"titanium-crystal":{"inputs":{"organic-crystal":1,"titanium-ingot":3},"outputs":{"titanium-crystal":1},"facility":"assembler","hand_make":"replicator","time_sec":4},"strange-matter":{"inputs":{"particle-container":2,"iron-ingot":2,"deuterium":10},"outputs":{"strange-matter":1},"facility":"particle-collider","hand_make":null,"time_sec":8},"gear":{"inputs":{"iron-ingot":1},"outputs":{"gear":1},"facility":"assembler","hand_make":"replicator","time_sec":1},"electromagnetic-turbine":{"inputs":{"electric-motor":2,"magnetic-coil":2},"outputs":{"electromagnetic-turbine":1},"facility":"assembler","hand_make":"replicator","time_sec":2},"circuit-board":{"inputs":{"iron-ingot":2,"copper-ingot":1},"outputs":{"circuit-board":2},"facility":"assembler","hand_make":"replicator","time_sec":1},"graviton-lens":{"inputs":{"diamond":4,"strange-matter":1},"outputs":{"graviton-lens":1},"facility":"assembler","hand_make":"replicator","time_sec":6},"sulfuric-acid":{"inputs":{"refined-oil":6,"stone-ore":8,"water":4},"outputs":{"sulfuric-acid":4},"facility":"chemical-facility","hand_make":null,"time_sec":6},"plane-filter":{"inputs":{"casimir-crystal":1,"titanium-glass":2},"outputs":{"plane-filter":1},"facility":"chemical-facility","hand_make":null,"time_sec":12},"carbon-nanotube":{"inputs":{"graphene":3,"titanium-ingot":1},"outputs":{"carbon-nanotube":2},"facility":"chemical-facility","hand_make":null,"time_sec":4},"carbon-nanotube-adv":{"inputs":{"spiniform-stalagmite-crystal":2},"outputs":{"carbon-nanotube":2},"facility":"chemical-facility","hand_make":null,"time_sec":4},"particle-broadband":{"inputs":{"carbon-nanotube":2,"crystal-silicon":2,"plastic":1},"outputs":{"particle-broadband":1},"facility":"assembler","hand_make":"replicator","time_sec":8},"processor":{"inputs":{"circuit-board":2,"microcrystalline-component":2},"outputs":{"processor":1},"facility":"assembler","hand_make":"replicator","time_sec":3},"casimir-crystal":{"inputs":{"titanium-crystal":1,"graphene":2,"hydrogen":12},"outputs":{"casimir-crystal":1},"facility":"assembler","hand_make":"replicator","time_sec":4},"casimir-crystal-adv":{"inputs":{"optical-grating-crystal":6,"graphene":2,"hydrogen":12},"outputs":{"casimir-crystal":1},"facility":"assembler","hand_make":"replicator","time_sec":4},"particle-container":{"inputs":{"electromagnetic-turbine":2,"copper-ingot":2,"graphene":2},"outputs":{"particle-container":1},"facility":"assembler","hand_make":"replicator","time_sec":4},"particle-container-adv":{"inputs":{"copper-ingot":2,"unipolar-magnet":10},"outputs":{"particle-container":1},"facility":"assembler","hand_make":"replicator","time_sec":4},"microcrystalline-component":{"inputs":{"high-purity-silicon":2,"copper-ingot":1},"outputs":{"microcrystalline-component":1},"facility":"assembler","hand_make":"replicator","time_sec":2},"quantum-chip":{"inputs":{"processor":2,"plane-filter":2},"outputs":{"quantum-chip":1},"facility":"assembler","hand_make":"replicator","time_sec":6},"mass-energy-storage":{"inputs":{"critical-photon":2},"outputs":{"hydrogen":2,"antimatter":2},"facility":"particle-collider","hand_make":null,"time_sec":6},"electromagnetic-matrix":{"inputs":{"magnetic-coil":1,"circuit-board":1},"outputs":{"electromagnetic-matrix":1},"facility":"research-facility","hand_make":"replicator","time_sec":3},"energy-matrix":{"inputs":{"energetic-graphite":2,"hydrogen":2},"outputs":{"energy-matrix":1},"facility":"research-facility","hand_make":"replicator","time_sec":6},"structure-matrix":{"inputs":{"diamond":1,"titanium-crystal":1},"outputs":{"structure-matrix":1},"facility":"research-facility","hand_make":"replicator","time_sec":8},"information-matrix":{"inputs":{"processor":2,"particle-broadband":1},"outputs":{"information-matrix":1},"facility":"research-facility","hand_make":"replicator","time_sec":10},"gravity-matrix":{"inputs":{"graviton-lens":1,"quantum-chip":1},"outputs":{"gravity-matrix":2},"facility":"research-facility","hand_make":"replicator","time_sec":24},"universe-matrix":{"inputs":{"electromagnetic-matrix":1,"energy-matrix":1,"structure-matrix":1,"information-matrix":1,"gravity-matrix":1,"antimatter":1},"outputs":{"universe-matrix":1},"facility":"research-facility","hand_make":"replicator","time_sec":15},"photon-combiner":{"inputs":{"prism":2,"circuit-board":1},"outputs":{"photon-combiner":1},"facility":"assembler","hand_make":"replicator","time_sec":3},"photon-combiner-adv":{"inputs":{"optical-grating-crystal":1,"circuit-board":1},"outputs":{"photon-combiner":1},"facility":"assembler","hand_make":null,"time_sec":3},"solar-sail":{"inputs":{"graphene":1,"photon-combiner":1},"outputs":{"solar-sail":2},"facility":"assembler","hand_make":"replicator","time_sec":4},"frame-material":{"inputs":{"carbon-nanotube":4,"titanium-alloy":1,"high-purity-silicon":1},"outputs":{"frame-material":1},"facility":"assembler","hand_make":"replicator","time_sec":6},"dyson-sphere-component":{"inputs":{"frame-material":3,"solar-sail":3,"processor":3},"outputs":{"dyson-sphere-component":1},"facility":"assembler","hand_make":"replicator","time_sec":8},"super-magnetic-ring":{"inputs":{"electromagnetic-turbine":2,"energetic-graphite":1,"magnet":3},"outputs":{"super-magnetic-ring":1},"facility":"assembler","hand_make":"replicator","time_sec":3},"deuteron-fuel-rod":{"inputs":{"deuterium":10,"titanium-alloy":1,"super-magnetic-ring":1},"outputs":{"deuteron-fuel-rod":1},"facility":"assembler","hand_make":"replicator","time_sec":6},"small-carrier-rocket":{"inputs":{"dyson-sphere-component":2,"deuteron-fuel-rod":2,"quantum-chip":2},"outputs":{"small-carrier-rocket":1},"facility":"assembler","hand_make":"replicator","time_sec":6}},"advanced_recipe":{"sulfuric-acid":[{"item":"sulfuric-acid","recipe":"dummy"}],"organic-crystal":[{"item":"organic-crystal","recipe":"dummy"}],"fire-ice":[{"item":"graphene","recipe":"graphene-adv"}],"fractal-silicon":[{"item":"crystal-silicon","recipe":"crystal-silicon-adv"}],"kimberlite-ore":[{"item":"diamond","recipe":"diamond-adv"}],"spiniform-stalagmite-crystal":[{"item":"carbon-nanotube","recipe":"carbon-nanotube-adv"}],"optical-grating-crystal":[{"item":"casimir-crystal","recipe":"casimir-crystal-adv"},{"item":"photon-combiner","recipe":"photon-combiner-adv"}],"unipolar-magnet":[{"item":"particle-container","recipe":"particle-container-adv"}]},"facility":{"smelter":{"type":"smelting-facility","crafting_speed":1},"assembling-machine-mk3":{"type":"assembler","crafting_speed":1.5},"chemical-plant":{"type":"chemical-facility","crafting_speed":1},"oil-refinery":{"type":"refining-facility","crafting_speed":1},"matrix-lab":{"type":"research-facility","crafting_speed":1},"fractionator":{"type":"fractionation-facility","crafting_speed":30},"miniature-particle-collider":{"type":"particle-collider","crafting_speed":1}},"hand_make":{"replicator":{"type":"replicator","crafting_speed":1}}}')},function(e,t,i){"use strict";var n=i(4),a=i.n(n)()((function(e){return e[1]}));a.push([e.i,'body {\n  font-size: 0.8em;\n  font-family: Helvetica, Arial, sans-serif;\n  color: #d2d2d2;\n  background-color: #1a1d21;\n}\n\nbody > * {\n  margin: 16px 8px;\n}\n\n#target-amount-table .item-name > div {\n  min-width: 0;\n}\n\n#target-amount-table .target-amount > div {\n  display: flex;\n  align-items: center;\n}\n\n#target-amount-table .target-amount > div > * {\n  margin-right: 4px;\n}\n\n.title {\n  font-weight: bold;\n}\n\n#amount-tables {\n  display: flex;\n}\n\n#amount-tables > * {\n  margin-right: 16px;\n  flex-grow: 1;\n}\n\ntable {\n  border-collapse: separate;\n  border-spacing: 0;\n}\n\ntd {\n  padding: 4px 8px;\n}\n\nthead td {\n  font-weight: bold;\n  background-color: #2a2d31;\n}\n\ntbody td {\n  border-bottom: 1px solid #2a2d31;\n}\n\n.item-name > div {\n  display: flex;\n  align-items: center;\n  min-width: 200px;\n}\n\n.item-name * {\n  margin-right: 6px;\n}\n\n.item-amount, .item-facilities {\n  text-align: right;\n  width: 80px;\n}\n\n.item-amount.surplus {\n  color: #6495ed;\n}\n\ninput[type="text"] {\n  color: #d2d2d2;\n  background-color: #1a1d21;\n  border: 1px solid #d2d2d2;\n  width: 60px;\n  text-align: right;\n}\n\n#rare-ore-chooser-container {\n  margin: 0 24px;\n}\n\n#rare-ore-chooser-container > * {\n  display: flex;\n  align-items: center;\n}\n\n#rare-ore-chooser-container > * > * {\n  margin: 2px;\n}\n',""]),t.a=a},function(e,t,i){"use strict";var n,a=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},r=function(){var e={};return function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}e[t]=i}return e[t]}}(),c=[];function o(e){for(var t=-1,i=0;i<c.length;i++)if(c[i].identifier===e){t=i;break}return t}function s(e,t){for(var i={},n=[],a=0;a<e.length;a++){var r=e[a],s=t.base?r[0]+t.base:r[0],l=i[s]||0,u="".concat(s," ").concat(l);i[s]=l+1;var m=o(u),d={css:r[1],media:r[2],sourceMap:r[3]};-1!==m?(c[m].references++,c[m].updater(d)):c.push({identifier:u,updater:y(d,t),references:1}),n.push(u)}return n}function l(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var a=i.nc;a&&(n.nonce=a)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var c=r(e.insert||"head");if(!c)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");c.appendChild(t)}return t}var u,m=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function d(e,t,i,n){var a=i?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=m(t,a);else{var r=document.createTextNode(a),c=e.childNodes;c[t]&&e.removeChild(c[t]),c.length?e.insertBefore(r,c[t]):e.appendChild(r)}}function p(e,t,i){var n=i.css,a=i.media,r=i.sourceMap;if(a?e.setAttribute("media",a):e.removeAttribute("media"),r&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var f=null,h=0;function y(e,t){var i,n,a;if(t.singleton){var r=h++;i=f||(f=l(t)),n=d.bind(null,i,r,!1),a=d.bind(null,i,r,!0)}else i=l(t),n=p.bind(null,i,t),a=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(i)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else a()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=a());var i=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<i.length;n++){var a=o(i[n]);c[a].references--}for(var r=s(e,t),l=0;l<i.length;l++){var u=o(i[l]);0===c[u].references&&(c[u].updater(),c.splice(u,1))}i=r}}}},function(e,t,i){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i=e(t);return t[2]?"@media ".concat(t[2]," {").concat(i,"}"):i})).join("")},t.i=function(e,i,n){"string"==typeof e&&(e=[[null,e,""]]);var a={};if(n)for(var r=0;r<this.length;r++){var c=this[r][0];null!=c&&(a[c]=!0)}for(var o=0;o<e.length;o++){var s=[].concat(e[o]);n&&a[s[0]]||(i&&(s[2]?s[2]="".concat(i," and ").concat(s[2]):s[2]=i),t.push(s))}},t}},function(e,t,i){"use strict";i.r(t);var n=i(3),a=i.n(n),r=i(2),c={insert:"head",singleton:!1},o=(a()(r.a,c),r.a.locals,i(1)),s=i(0);class l{constructor(e,t=document.createElement("div")){if(void 0===s.offsets[e])console.warn("item icon not found. : itemName="+e);else{const i=s.offsets[e].x*s.width,n=s.offsets[e].y*s.height;t.style.backgroundImage='url("assets/icon.png")',t.style.backgroundPosition=`${-i}px ${-n}px`}t.style.width="16px",t.style.height="16px",this._domElement=t}get domElement(){return this._domElement}}class u{constructor(){this._group=document.createElement("div"),this._group.setAttribute("id","amount-tables"),this._tableBodies=[],this._curData={},this._curTableNum=0,window.addEventListener("resize",this.onWindowResize.bind(this)),this.onWindowResize()}get domElement(){return this._group}onWindowResize(){let e;const t=window.innerWidth;e=t<900?1:t<1300?2:3,this._curTableNum!==e&&(this._curTableNum=e,this.setTableNum(e))}setTableNum(e){this.clearChildren(this._group),this._tableBodies=[];for(let t=0;t<e;t++){const e=document.createElement("table");this._group.appendChild(e);const t=document.createElement("thead");e.appendChild(t),this.createHeader(t);const i=document.createElement("tbody");e.appendChild(i),this._tableBodies.push(i)}this.update(this._curData)}createHeader(e){const t=document.createElement("tr");e.appendChild(t);const i=document.createElement("td");i.textContent="Name",t.appendChild(i);const n=document.createElement("td");n.textContent="Amount (/m)",t.appendChild(n);const a=document.createElement("td");a.textContent="Facilities",t.appendChild(a)}clearChildren(e){for(;e.children.length>0;)e.removeChild(e.children[0])}update(e){this._curData=e;const t=Object.keys(e).length,i=Math.ceil(t/this._tableBodies.length);for(const[n,a]of this._tableBodies.entries()){const r=n*i,c=Math.min((n+1)*i,t),o=Object.fromEntries(Object.entries(e).slice(r,c));this.updateCore(a,o)}}updateCore(e,t){this.clearChildren(e);for(const i in t){const n=document.createElement("tr");e.appendChild(n);const a=document.createElement("td");n.appendChild(a),a.classList.add("item-name");{const e=document.createElement("div");a.appendChild(e);{const t=new l(i).domElement;e.appendChild(t);const n=document.createElement("div");e.appendChild(n),n.textContent=i}}const r=document.createElement("td");n.appendChild(r),r.classList.add("item-amount"),t[i].amount<0&&r.classList.add("surplus"),r.textContent=t[i].amount.toFixed(1);const c=document.createElement("td");n.appendChild(c),c.classList.add("item-facilities"),null!==t[i].facilities&&(c.textContent=t[i].facilities.toFixed(3))}}}class m{constructor(e,t,i){const n=void 0!==i[e]?i[e]:e;if(this._recipe=o.recipe[n],this._name=e,this._usedFacility=void 0!==this._recipe?o.facility[t[this._recipe.facility]]:null,this._children={},void 0!==this._recipe)for(const e in this._recipe.inputs)this._children[e]=new m(e,t,i);this._ingredients={}}get name(){return this._name}update(e){const t=this._recipe,i=this._name;if(this._ingredients[i]={amount:e,facilities:null},void 0===t)return;const n=e/t.outputs[i],a=t.time_sec/60/this._usedFacility.crafting_speed;this._ingredients[i].facilities=n*a;for(const[e,a]of Object.entries(t.outputs))e!==i&&(this._ingredients[e]={amount:-1*n*a,facilities:null});for(const[e,i]of Object.entries(this._children)){const a=n*t.inputs[e];i.update(a)}}getIngredients(e={}){this._name;for(const[t,i]of Object.entries(this._ingredients))void 0===e[t]&&(e[t]={amount:0,facilities:null}),null!==i.facilities&&null===e[t].facilities&&(e[t].facilities=0),e[t].amount+=i.amount,null!==i.facilities&&(e[t].facilities+=i.facilities);for(const t of Object.values(this._children))t.getIngredients(e);return e}}class d{constructor(e,t,i,n=document.createElement("tr")){const a=document.createElement("td");n.appendChild(a),a.classList.add("item-name");{const t=document.createElement("div");a.appendChild(t);{const i=new l(e).domElement;t.appendChild(i);const n=document.createElement("div");t.appendChild(n),n.textContent=e}}const r=document.createElement("td");r.classList.add("target-amount"),n.appendChild(r);{const e=document.createElement("div");r.appendChild(e);{const n=document.createElement("input");e.appendChild(n),n.setAttribute("type","text"),n.value=i,n.addEventListener("input",e=>{t(e)});const a=document.createElement("div");e.appendChild(a),a.textContent="/m"}}this._domElement=n}get domElement(){return this._domElement}}class p{constructor(){this._renderer=new u,document.querySelector("#table-container").appendChild(this._renderer.domElement),this._usedFacilityMap={assembler:"assembling-machine-mk3","smelting-facility":"smelter","chemical-facility":"chemical-plant","refining-facility":"oil-refinery","research-facility":"matrix-lab","fractionation-facility":"fractionator","particle-collider":"miniature-particle-collider"},this._overrideRecipeMap={"refined-oil":"plasma-refining",deuterium:"deuterium-fractionation",antimatter:"mass-energy-storage"},this._order={};for(const[e,t]of Object.keys(s.offsets).entries())this._order[t]=e;const e=[{name:"universe-matrix",amount:100},{name:"small-carrier-rocket",amount:0},{name:"solar-sail",amount:0}];this._targetItems=[];const t=document.querySelector("#target-amount-table");for(const i of e){const e={item:new m(i.name,this._usedFacilityMap,this._overrideRecipeMap),amount:i.amount};this._targetItems.push(e);const n=new d(i.name,t=>{const i=parseFloat(t.target.value);isNaN(i)||(e.amount=i,this.update())},i.amount);t.appendChild(n.domElement)}const i=document.querySelector("#rare-ore-chooser-container");for(const e in o.advanced_recipe){const t=document.createElement("div");i.appendChild(t);const n=document.createElement("input");t.appendChild(n),n.setAttribute("type","checkbox"),n.setAttribute("value",e),n.addEventListener("change",e=>{for(const{item:t,recipe:i}of o.advanced_recipe[e.target.value])this._overrideRecipeMap[t]=e.target.checked?i:t;for(const e of this._targetItems)e.item=new m(e.item.name,this._usedFacilityMap,this._overrideRecipeMap);this.update()});const a=new l(e).domElement;t.appendChild(a);const r=document.createElement("label");t.appendChild(r),r.textContent=e}this.update()}update(){const e={};for(const t of this._targetItems){t.item.update(t.amount);const i=t.item.getIngredients();for(const[t,n]of Object.entries(i))void 0===e[t]?e[t]=n:(e[t].amount+=n.amount,null!==e[t].facilities&&null!==n.facilities&&(e[t].facilities+=n.facilities))}const t={};for(const[i,n]of Object.entries(e))0!==n.amount&&(t[i]=n);const i=Object.entries(t);i.sort((e,t)=>{const i=this._order[e[0]],n=this._order[t[0]];return i<n?-1:i>n?1:0});const n=Object.fromEntries(i);this._renderer.update(n)}}document.addEventListener("DOMContentLoaded",()=>{new p})}]);